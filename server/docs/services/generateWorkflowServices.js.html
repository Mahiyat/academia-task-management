<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: generateWorkflowServices.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: generateWorkflowServices.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import ollama from "ollama";
import Task from "../models/Task.js";

/**
 * Connects with the Ollama API to generate suggestions for managing tasks 
 * based on priority and deadlines.
 * @param {string} kanbanBoardId - The ID of the kanban board whose tasks will be analyzed.
 * @returns {AsyncGenerator&lt;object, void, undefined>} - An async generator 
 * that yields response objects from the Ollama API.
 * @throws {Error} - Throws an error if there is a failure connecting to the Ollama service.
 */
const generateSuggestions = async (kanbanBoardId) => {
  const tasks = await Task.find({
    kanbanBoardId,
    status: { $in: ["todo", "doing"] },
  });

  const request = {
    model: "llama3.2",
    prompt: `I need your help. I have been overloaded with tons of tasks. 
        The list of tasks in json format as follows:
        ${tasks}

        Suggest me how I will complete the tasks on time as per deadline and priority. 
        If deadline gets crossed then suggest me how I will complete the tasks with minimum delay. 
        The meaning of the colors used in priority in the order of their preference is given:
        red: "urgent",
        orange: "important",
        yellow: "moderate",
        green: "completed",
        purple: "info",
        blue: "optional".
        While suggesting, please mention only the task names in list format.`,
    stream: true,
    options: {
      seed: 42,
      temperature: 0.5,
    },
  };

  try {
    const ollamaResponse = await Promise.race([
      ollama.generate(request),
      new Promise(
        (_, reject) =>
          setTimeout(() => reject(new Error("Ollama request timed out")), 20000)
      ),
    ]);

    return ollamaResponse;
  } catch (error) {
    console.error("Ollama request error:", error);
    throw new Error("Failed to connect to Ollama service");
  }
};

export default { generateSuggestions };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addExamCommitteeMember">addExamCommitteeMember</a></li><li><a href="global.html#createBoard">createBoard</a></li><li><a href="global.html#createNewCourse">createNewCourse</a></li><li><a href="global.html#createSemester">createSemester</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#deleteBoard">deleteBoard</a></li><li><a href="global.html#deleteCourse">deleteCourse</a></li><li><a href="global.html#deleteTask">deleteTask</a></li><li><a href="global.html#generateSuggestions">generateSuggestions</a></li><li><a href="global.html#getAllBoards">getAllBoards</a></li><li><a href="global.html#getAllCourses">getAllCourses</a></li><li><a href="global.html#getAllSemesters">getAllSemesters</a></li><li><a href="global.html#getAllTasks">getAllTasks</a></li><li><a href="global.html#getAllTeachers">getAllTeachers</a></li><li><a href="global.html#getBoardByCourseId">getBoardByCourseId</a></li><li><a href="global.html#getBoardById">getBoardById</a></li><li><a href="global.html#getCourseById">getCourseById</a></li><li><a href="global.html#getCourseOverviewData">getCourseOverviewData</a></li><li><a href="global.html#getCoursesBySemester">getCoursesBySemester</a></li><li><a href="global.html#getCoursesByTeacherId">getCoursesByTeacherId</a></li><li><a href="global.html#getTaskById">getTaskById</a></li><li><a href="global.html#getTasks">getTasks</a></li><li><a href="global.html#getTasksByBoard">getTasksByBoard</a></li><li><a href="global.html#getTasksByBoardAndStatus">getTasksByBoardAndStatus</a></li><li><a href="global.html#getTeacherById">getTeacherById</a></li><li><a href="global.html#updateBoard">updateBoard</a></li><li><a href="global.html#updateCourse">updateCourse</a></li><li><a href="global.html#updateSemester">updateSemester</a></li><li><a href="global.html#updateTask">updateTask</a></li><li><a href="global.html#updateTeacherCourses">updateTeacherCourses</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Nov 10 2024 21:36:23 GMT+0600 (Bangladesh Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
